(this["webpackJsonpomdb-frontend"]=this["webpackJsonpomdb-frontend"]||[]).push([[0],{35:function(e,t,a){e.exports=a(51)},46:function(e,t,a){},47:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a(16),l=a(14),o=a(8),s=Object(o.a)({basename:"/omdb-frontend"}),u=a(7),m=a.n(u),d=a(13),f=a(5),E=a(33),p=a(29),b=a.n(p),v=a(30),h=a(15),g=a(31),O=Object(g.actionCreatorFactory)("movie-search"),x=O("set-search"),N=O("set-page"),y={BEGIN:O("BEGIN_FETCH_SEARCH_MOVIES"),ERROR:O("ERROR_FETCH_SEARCH_MOVIES"),SUCCESS:O("SUCCESS_FETCH_SEARCH_MOVIES")},C={BEGIN:O("BEGIN_FETCH_MOVIE_DETAIL"),ERROR:O("ERROR_FETCH_MOVIE_DETAIL"),SUCCESS:O("SUCCESS_FETCH_MOVIE_DETAIL")},S=Object(v.reducerWithInitialState)({search:"",page:1,loading:!1,movieThumbnails:[],movieDetail:null}).case(x,(function(e,t){return Object(h.a)(e,(function(e){e.search=t,e.movieThumbnails=[],e.page=1}))})).case(N,(function(e,t){return Object(h.a)(e,(function(e){e.page=t}))})).case(y.SUCCESS,(function(e,t){return Object(h.a)(e,(function(e){e.movieThumbnails=t,e.loading=!1}))})).case(C.SUCCESS,(function(e,t){return Object(h.a)(e,(function(e){e.movieDetail=t,e.loading=!1}))})).case(C.BEGIN,(function(e,t){return Object(h.a)(e,(function(e){e.loading=!1,e.movieDetail=null}))})).cases([y.BEGIN],(function(e,t){return Object(h.a)(e,(function(e){e.loading=!0}))})).cases([y.ERROR,C.ERROR],(function(e,t){return Object(h.a)(e,(function(e){e.loading=!1}))})),j=m.a.mark(_),w=m.a.mark(M),R=m.a.mark(B),k=m.a.mark(U),T=m.a.mark(G),I=m.a.mark(D);function _(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)(B);case 2:return e.next=4,Object(f.h)(y.BEGIN.type,G);case 4:return e.next=6,Object(f.h)(C.BEGIN.type,D);case 6:return e.next=8,Object(f.h)(N.type,M);case 8:case"end":return e.stop()}}),j)}function M(e){var t;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(f.f)((function(e){return e.movies.search}));case 2:return t=a.sent,a.next=5,Object(f.e)(y.BEGIN({query:t,page:e.payload}));case 5:case"end":return a.stop()}}),w)}function B(){var e,t,a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=null;case 1:return n.next=4,Object(f.g)(x.type);case 4:if(t=n.sent,!((a=t.payload).length<5)){n.next=8;break}return n.abrupt("continue",1);case 8:if(!e){n.next=11;break}return n.next=11,Object(f.b)(e);case 11:return n.next=13,Object(f.d)(U,a);case 13:e=n.sent,n.next=1;break;case 16:case"end":return n.stop()}}),R)}function U(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.c)(1200);case 2:return t.next=4,Object(f.e)(y.BEGIN({query:e,page:1}));case 4:case"end":return t.stop()}}),k)}function G(e){var t,a,n;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(f.a)(fetch,"https://www.omdbapi.com/?s=".concat(e.payload.query,"&page=").concat(e.payload.page,"&apikey=82342796"));case 3:return t=r.sent,r.next=6,t.json();case 6:if(!(a=r.sent).Error){r.next=11;break}return r.next=10,Object(f.e)(y.SUCCESS(null));case 10:return r.abrupt("return");case 11:return n=a.Search.map((function(e){return{id:e.imdbID,name:e.Title,year:Number(e.Year),posterUrl:"N/A"===e.Poster?null:e.Poster}})),r.next=14,Object(f.e)(y.SUCCESS(n));case 14:r.next=20;break;case 16:return r.prev=16,r.t0=r.catch(0),r.next=20,Object(f.e)(y.ERROR(r.t0));case 20:case"end":return r.stop()}}),T,null,[[0,16]])}function D(e){var t,a,n;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(f.a)(fetch,"https://www.omdbapi.com/?apikey=82342796&i=".concat(e.payload.id));case 3:return t=r.sent,r.next=6,t.json();case 6:if(!(a=r.sent).Error){r.next=13;break}return r.next=10,Object(f.e)(C.SUCCESS(null));case 10:return alert("Unable to display page (".concat(a.Error,")")),s.push("/"),r.abrupt("return");case 13:return n={title:a.Title,genre:a.Genre,released:a.Released,year:Number(a.Year),poster:a.Poster,plot:a.Plot},r.next=16,Object(f.e)(C.SUCCESS(n));case 16:r.next=22;break;case 18:return r.prev=18,r.t0=r.catch(0),r.next=22,Object(f.e)(C.ERROR(r.t0));case 22:case"end":return r.stop()}}),I,null,[[0,18]])}var F=Object(d.c)({movies:S}),P=m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)(_);case 2:case"end":return e.stop()}}),e)})),H=Object(E.a)(),A=Object(d.e)(F,void 0,Object(d.a)(b.a,H));H.run(P);var V=a(34),W=(a(46),function(e){return r.a.createElement("div",{className:"search-bar"},r.a.createElement("input",{className:"input ".concat(e.inputClassName||""),type:"text",value:e.value,placeholder:e.placeholder,disabled:e.disabled,onChange:function(t){return!e.disabled&&e.onChange(t.target.value)}}))}),q=(a(47),a(23)),L=function(e){return r.a.createElement("div",{className:"movie-box box"},r.a.createElement(q.a,{to:"/movie/".concat(e.id)},r.a.createElement("div",null,r.a.createElement("strong",null,e.name)),r.a.createElement("div",{className:""},r.a.createElement("img",{src:e.posterUrl,alt:"Poster"}))))},J=function(){return r.a.createElement("svg",{width:"58",height:"58",viewBox:"0 0 58 58",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{fill:"#ddd",fillRule:"evenodd"},r.a.createElement("g",{transform:"translate(2 1)",stroke:"#FFF",strokeWidth:"1.5"},r.a.createElement("circle",{cx:"42.601",cy:"11.462",r:"5",fillOpacity:"1",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"1;0;0;0;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"49.063",cy:"27.063",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;1;0;0;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"42.601",cy:"42.663",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;1;0;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"27",cy:"49.125",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;1;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"11.399",cy:"42.663",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;0;1;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"4.938",cy:"27.063",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;0;0;1;0;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"11.399",cy:"11.462",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;0;0;0;1;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"27",cy:"5",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;0;0;0;0;1",calcMode:"linear",repeatCount:"indefinite"})))))},Y=(a(49),Object(i.b)((function(e){return Object(V.a)({},e.movies)}),(function(e){return{setSearchText:function(t){return e(x(t))},setPage:function(t){return e(N(t))}}}))((function(e){return r.a.createElement("div",{className:"movies-search-page"},r.a.createElement("section",{className:"hero is-info"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"control"},r.a.createElement(W,{value:e.search,inputClassName:"is-large ".concat(null===e.movieThumbnails?"is-danger":""),placeholder:"Enter movie title",onChange:e.setSearchText})))))))),r.a.createElement("section",{className:"container movie-box-container"},!e.loading&&e.movieThumbnails&&!!e.movieThumbnails.length&&e.page>1&&r.a.createElement("button",{className:"button primary next-button",onClick:function(){return e.setPage(e.page-1)}},"Prev \u2190"),"\xa0",!e.loading&&e.movieThumbnails&&!!e.movieThumbnails.length&&r.a.createElement("button",{className:"button primary next-button",onClick:function(){return e.setPage(e.page+1)}},"Next \u2192"),e.loading&&r.a.createElement(J,null),r.a.createElement("div",{className:"columns is-multiline"},!e.loading&&e.movieThumbnails&&e.movieThumbnails.map((function(e){return r.a.createElement("div",{className:"column is-mobile-full is-one-fifth",key:e.id},r.a.createElement(L,{name:e.name,id:e.id,posterUrl:e.posterUrl}))})))))}))),z=Object(i.b)((function(e,t){return{id:t.match.params.id,movie:e.movies.movieDetail,loading:e.movies.loading}}),(function(e){return{fetchMovie:function(t){return e(C.BEGIN({id:t}))}}}))((function(e){var t=e.id,a=e.movie,n=e.loading,c=e.fetchMovie;return r.a.useEffect((function(){c(t)}),[t,c]),r.a.createElement("div",{className:"container "},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-4"}),n&&r.a.createElement("div",{className:"column is-4"},r.a.createElement(J,null)),!n&&r.a.createElement("div",{className:"card column is-4"},r.a.createElement("div",{className:"card-image"},r.a.createElement("figure",{className:"image is-3by4"},r.a.createElement("img",{src:null===a||void 0===a?void 0:a.poster,alt:"Poster"}))),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("p",{className:"title is-4"},null===a||void 0===a?void 0:a.title),r.a.createElement("p",{className:"subtitle"},null===a||void 0===a?void 0:a.year))),r.a.createElement("div",{className:"content"},r.a.createElement("p",null,null===a||void 0===a?void 0:a.genre),r.a.createElement("p",null,null===a||void 0===a?void 0:a.plot),r.a.createElement("br",null),r.a.createElement("time",{dateTime:"2016-1-1"},null===a||void 0===a?void 0:a.released))))))})),$=function(){return r.a.createElement(i.a,{store:A},r.a.createElement("div",{className:"page"},r.a.createElement("section",null,r.a.createElement("h1",{className:"is-size-1"},"OMDB - Demo app")),r.a.createElement(l.b,{history:s},r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",exact:!0,component:Y}),r.a.createElement(l.a,{path:"/movie/:id",exact:!0,component:z})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(50);c.render(n.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.18dc51f7.chunk.js.map