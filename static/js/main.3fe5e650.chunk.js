(this["webpackJsonpomdb-frontend"]=this["webpackJsonpomdb-frontend"]||[]).push([[0],{34:function(e,t,a){e.exports=a(54)},46:function(e,t,a){},47:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a(14),l=a(17),o=a(16),s=a(8),u=Object(s.a)({basename:"/omdb-frontend"}),m=a(6),f=a.n(m),d=a(15),v=a(5),E=a(32),p=(a(44),a(29)),b=a(13),g=a(30),h=Object(g.actionCreatorFactory)("movie-search"),N=h("set-search"),O=h("set-page"),x={BEGIN:h("BEGIN_FETCH_SEARCH_MOVIES"),ERROR:h("ERROR_FETCH_SEARCH_MOVIES"),SUCCESS:h("SUCCESS_FETCH_SEARCH_MOVIES")},y={BEGIN:h("BEGIN_FETCH_MOVIE_DETAIL"),ERROR:h("ERROR_FETCH_MOVIE_DETAIL"),SUCCESS:h("SUCCESS_FETCH_MOVIE_DETAIL")},C=h("SET_MOVIE_FAVOURITE");var S={search:"",page:1,loading:!1,movieThumbnails:[],movieDetail:null,favourites:function(e){var t=localStorage.getItem(e);return JSON.parse(t)}("favorited-movies")||[]},j=Object(p.reducerWithInitialState)(S).case(N,(function(e,t){return Object(b.a)(e,(function(e){e.search=t,e.movieThumbnails=[],e.page=1}))})).case(O,(function(e,t){return Object(b.a)(e,(function(e){e.page=t}))})).case(x.SUCCESS,(function(e,t){return Object(b.a)(e,(function(e){e.movieThumbnails=t,e.loading=!1}))})).case(y.SUCCESS,(function(e,t){return Object(b.a)(e,(function(e){e.movieDetail=t,e.loading=!1}))})).case(y.BEGIN,(function(e,t){return Object(b.a)(e,(function(e){e.loading=!1,e.movieDetail=null}))})).case(C,(function(e,t){return Object(b.a)(e,(function(e){var a=e.favourites.findIndex((function(e){return e.id===t.movie.id}));a<0?e.favourites.push(t.movie):e.favourites.splice(a,1)}))})).cases([x.BEGIN],(function(e,t){return Object(b.a)(e,(function(e){e.loading=!0}))})).cases([x.ERROR,y.ERROR],(function(e,t){return Object(b.a)(e,(function(e){e.loading=!1}))})),w=f.a.mark(M),k=f.a.mark(U),R=f.a.mark(B),I=f.a.mark(G),T=f.a.mark(D),_=f.a.mark(H),F=f.a.mark(P);function M(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.d)(B);case 2:return e.next=4,Object(v.h)(x.BEGIN.type,D);case 4:return e.next=6,Object(v.h)(y.BEGIN.type,H);case 6:return e.next=8,Object(v.h)(O.type,U);case 8:return e.next=10,Object(v.h)(C.type,P);case 10:case"end":return e.stop()}}),w)}function U(e){var t;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(v.f)((function(e){return e.movies.search}));case 2:return t=a.sent,a.next=5,Object(v.e)(x.BEGIN({query:t,page:e.payload}));case 5:case"end":return a.stop()}}),k)}function B(){var e,t,a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=null;case 1:return n.next=4,Object(v.g)(N.type);case 4:if(t=n.sent,!((a=t.payload).length<5)){n.next=8;break}return n.abrupt("continue",1);case 8:if(!e){n.next=11;break}return n.next=11,Object(v.b)(e);case 11:return n.next=13,Object(v.d)(G,a);case 13:e=n.sent,n.next=1;break;case 16:case"end":return n.stop()}}),R)}function G(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(v.c)(1200);case 2:return t.next=4,Object(v.e)(x.BEGIN({query:e,page:1}));case 4:case"end":return t.stop()}}),I)}function D(e){var t,a,n;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(v.a)(fetch,"https://www.omdbapi.com/?s=".concat(e.payload.query,"&page=").concat(e.payload.page,"&apikey=82342796"));case 3:return t=r.sent,r.next=6,t.json();case 6:if(!(a=r.sent).Error){r.next=11;break}return r.next=10,Object(v.e)(x.SUCCESS(null));case 10:return r.abrupt("return");case 11:return n=a.Search.map((function(e){return{id:e.imdbID,name:e.Title,year:Number(e.Year),posterUrl:"N/A"===e.Poster?null:e.Poster}})),r.next=14,Object(v.e)(x.SUCCESS(n));case 14:r.next=20;break;case 16:return r.prev=16,r.t0=r.catch(0),r.next=20,Object(v.e)(x.ERROR(r.t0));case 20:case"end":return r.stop()}}),T,null,[[0,16]])}function H(e){var t,a,n;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(v.a)(fetch,"https://www.omdbapi.com/?apikey=82342796&i=".concat(e.payload.id));case 3:return t=r.sent,r.next=6,t.json();case 6:if(!(a=r.sent).Error){r.next=13;break}return r.next=10,Object(v.e)(y.SUCCESS(null));case 10:return alert("Unable to display page (".concat(a.Error,")")),u.push("/"),r.abrupt("return");case 13:return n={id:a.imdbID,title:a.Title,genre:a.Genre,released:a.Released,year:Number(a.Year),poster:a.Poster,plot:a.Plot},r.next=16,Object(v.e)(y.SUCCESS(n));case 16:r.next=22;break;case 18:return r.prev=18,r.t0=r.catch(0),r.next=22,Object(v.e)(y.ERROR(r.t0));case 22:case"end":return r.stop()}}),_,null,[[0,18]])}function P(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(v.f)((function(e){return e.movies.favourites}));case 2:e=t.sent,a="favorited-movies",n=e,localStorage.setItem(a,JSON.stringify(n));case 4:case"end":return t.stop()}var a,n}),F)}var A=Object(d.c)({movies:j}),V=f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.d)(M);case 2:case"end":return e.stop()}}),e)})),J=Object(E.a)(),W=[J];var q=Object(d.e)(A,void 0,d.a.apply(void 0,W));J.run(V);var L=a(33),Y=(a(46),function(e){return r.a.createElement("div",{className:"search-bar"},r.a.createElement("input",{className:"input ".concat(e.inputClassName||""),type:"text",value:e.value,placeholder:e.placeholder,disabled:e.disabled,onChange:function(t){return!e.disabled&&e.onChange(t.target.value)}}))}),z=(a(47),function(e){return r.a.createElement("div",{className:"movie-box box"},r.a.createElement(o.a,{to:"/movie/".concat(e.id)},r.a.createElement("div",null,r.a.createElement("strong",null,e.name)),r.a.createElement("div",{className:""},r.a.createElement("img",{src:e.posterUrl,alt:"Poster"}))))}),$=function(){return r.a.createElement("svg",{width:"58",height:"58",viewBox:"0 0 58 58",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{fill:"#ddd",fillRule:"evenodd"},r.a.createElement("g",{transform:"translate(2 1)",stroke:"#FFF",strokeWidth:"1.5"},r.a.createElement("circle",{cx:"42.601",cy:"11.462",r:"5",fillOpacity:"1",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"1;0;0;0;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"49.063",cy:"27.063",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;1;0;0;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"42.601",cy:"42.663",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;1;0;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"27",cy:"49.125",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;1;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"11.399",cy:"42.663",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;0;1;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"4.938",cy:"27.063",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;0;0;1;0;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"11.399",cy:"11.462",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;0;0;0;1;0",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("circle",{cx:"27",cy:"5",r:"5",fillOpacity:"0",fill:"#fff"},r.a.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;0;0;0;0;1",calcMode:"linear",repeatCount:"indefinite"})))))},K=(a(49),Object(i.b)((function(e){return Object(L.a)({},e.movies)}),(function(e){return{setSearchText:function(t){return e(N(t))},setPage:function(t){return e(O(t))}}}))((function(e){return r.a.createElement("div",{className:"movies-search-page"},r.a.createElement("section",{className:"hero is-info"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"control"},r.a.createElement(Y,{value:e.search,inputClassName:"is-large ".concat(null===e.movieThumbnails?"is-danger":""),placeholder:"Enter movie title",onChange:e.setSearchText})))))))),r.a.createElement("section",{className:"container movie-box-container"},!e.loading&&e.movieThumbnails&&!!e.movieThumbnails.length&&e.page>1&&r.a.createElement("button",{className:"button primary next-button",onClick:function(){return e.setPage(e.page-1)}},"Prev \u2190"),"\xa0",!e.loading&&e.movieThumbnails&&!!e.movieThumbnails.length&&r.a.createElement("button",{className:"button primary next-button",onClick:function(){return e.setPage(e.page+1)}},"Next \u2192"),e.loading&&r.a.createElement($,null),r.a.createElement("div",{className:"columns is-multiline"},!e.loading&&e.movieThumbnails&&e.movieThumbnails.map((function(e){return r.a.createElement("div",{className:"column is-mobile-full is-one-fifth",key:e.id},r.a.createElement(z,{name:e.name,id:e.id,posterUrl:e.posterUrl}))})))))}))),Q=(a(50),function(e){var t=e.active,a=e.text,n=e.onClick;return r.a.createElement("span",{onClick:n,className:"favourite-button ".concat(t?"active":"")},a)}),X=(a(51),Object(i.b)((function(e,t){return{id:t.match.params.id,movie:e.movies.movieDetail,loading:e.movies.loading,isFavourite:!!e.movies.favourites.find((function(e){return e.id===t.match.params.id}))}}),(function(e){return{fetchMovie:function(t){return e(y.BEGIN({id:t}))},toggleFavourite:function(t){return e(C({movie:t}))}}}))((function(e){var t=e.id,a=e.movie,n=e.loading,c=e.isFavourite,i=e.toggleFavourite,l=e.fetchMovie;return r.a.useEffect((function(){l(t)}),[t,l]),r.a.createElement("div",{className:"container movie-detail-page"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-4"}),n&&r.a.createElement("div",{className:"column is-4"},r.a.createElement($,null)),!n&&r.a.createElement("div",{className:"card favourite-card column is-4"},r.a.createElement("div",{className:"card-image"},r.a.createElement("figure",{className:"image is-3by4"},r.a.createElement("img",{src:null===a||void 0===a?void 0:a.poster,alt:"Poster"}))),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("p",{className:"title is-4"},null===a||void 0===a?void 0:a.title,r.a.createElement(Q,{text:"\u2605",active:c,onClick:function(){return i(a)}})),r.a.createElement("p",{className:"subtitle"},null===a||void 0===a?void 0:a.year))),r.a.createElement("div",{className:"content"},r.a.createElement("p",null,null===a||void 0===a?void 0:a.genre),r.a.createElement("p",null,null===a||void 0===a?void 0:a.plot),r.a.createElement("br",null),r.a.createElement("time",{dateTime:"2016-1-1"},null===a||void 0===a?void 0:a.released))))))}))),Z=(a(52),Object(i.b)((function(e,t){return{movies:e.movies.favourites}}),(function(e){return{toggleFavourite:function(t){return e(C({movie:t}))}}}))((function(e){return r.a.createElement("div",{className:"container favourites-page"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-4"}),r.a.createElement("div",{className:"column is-4"},e.movies.map((function(t){return r.a.createElement("div",{className:"card favourite-movie-card",key:t.id},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media-content"},r.a.createElement("p",{className:"title is-4"},r.a.createElement(o.a,{to:"/movie/".concat(t.id)},t.title)),r.a.createElement("p",{className:"subtitle is-6"},t.plot))),r.a.createElement("footer",{className:"card-footer"},r.a.createElement("div",{className:"card-footer-item"}),r.a.createElement("div",{className:"card-footer-item"},r.a.createElement(Q,{text:"\ud83d\uddd1",active:!0,onClick:function(){return e.toggleFavourite(t)}})),r.a.createElement("div",{className:"card-footer-item"})))})),!e.movies.length&&r.a.createElement("span",null,"No favourited movies. ",r.a.createElement(o.a,{to:"/"},"Search")," for some"))))}))),ee=function(){return r.a.createElement(i.a,{store:q},r.a.createElement(l.b,{history:u},r.a.createElement("div",{className:"page"},r.a.createElement("header",null,r.a.createElement("h1",{className:"is-size-1"},"OMDB"),r.a.createElement("nav",{className:"nav-links"},r.a.createElement(o.a,{to:"/"},"Home"),"\xa0",r.a.createElement(o.a,{to:"/favourites"},"Favourites"))),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",exact:!0,component:K}),r.a.createElement(l.a,{path:"/movie/:id",exact:!0,component:X}),r.a.createElement(l.a,{path:"/favourites",exact:!0,component:Z})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(53);c.render(n.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.3fe5e650.chunk.js.map